# Firebase App Hosting Configuration
# https://firebase.google.com/docs/app-hosting/configure

# Cloud Run configuration
runConfig:
  minInstances: 0  # Scale to zero for cost savings in TEST
  maxInstances: 10
  concurrency: 80
  cpu: 1
  memoryMiB: 512

# Environment variables and secrets
env:
  # ==========================================
  # Public Firebase Configuration (Client SDK)
  # ==========================================
  # Firebase Client SDK configuration as public NEXT_PUBLIC_* variables
  # These values are safe to expose as they're visible in the client bundle anyway
  # Access control is managed via Firebase Security Rules, not API keys
  - variable: NEXT_PUBLIC_FIREBASE_API_KEY
    value: "AIzaSyB59t2OsKGRHyMw3ah6Qa04G5v5cVFCnqo"
    availability:
      - BUILD
      - RUNTIME

  - variable: NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN
    value: "echoscribe-test.firebaseapp.com"
    availability:
      - BUILD
      - RUNTIME

  - variable: NEXT_PUBLIC_FIREBASE_PROJECT_ID
    value: "echoscribe-test"
    availability:
      - BUILD
      - RUNTIME

  - variable: NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET
    value: "echoscribe-test.firebasestorage.app"
    availability:
      - BUILD
      - RUNTIME

  - variable: NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
    value: "436441931185"
    availability:
      - BUILD
      - RUNTIME

  - variable: NEXT_PUBLIC_FIREBASE_APP_ID
    value: "1:436441931185:web:ec94164ea9bd381df4b190"
    availability:
      - BUILD
      - RUNTIME

  - variable: NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID
    value: "G-5TJ0YQP3DN"
    availability:
      - BUILD
      - RUNTIME

  # ==========================================
  # Stripe Configuration
  # ==========================================
  - variable: NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY
    value: pk_test_51SJzrMGiTikY0UunW1S5hZcTMLPvXFFOaCY8wWfEuLOEJZTDQviGtWQt0FWz1GrNjqSoDjA6HmolPpCImWBKfc4V00yBVNO6HB
    availability:
      - BUILD
      - RUNTIME

  # Stripe Secret Key (from Secret Manager)
  - variable: STRIPE_SECRET_KEY
    secret: STRIPE_SECRET_KEY
    availability:
      - RUNTIME

  # Stripe Webhook Secret (from Secret Manager)
  - variable: STRIPE_WEBHOOK_SECRET
    secret: STRIPE_WEBHOOK_SECRET
    availability:
      - RUNTIME

  # ==========================================
  # Stripe Price IDs (from Secret Manager)
  # ==========================================
  - variable: STRIPE_PRICE_ID_STARTER_MONTHLY
    secret: STRIPE_PRICE_ID_STARTER_MONTHLY
    availability:
      - RUNTIME

  - variable: STRIPE_PRICE_ID_PROFESSIONAL_MONTHLY
    secret: STRIPE_PRICE_ID_PROFESSIONAL_MONTHLY
    availability:
      - RUNTIME

  - variable: STRIPE_PRICE_ID_BUSINESS_MONTHLY
    secret: STRIPE_PRICE_ID_BUSINESS_MONTHLY
    availability:
      - RUNTIME

  # Legacy Pro tier (for backward compatibility)
  - variable: STRIPE_PRICE_ID_PRO_MONTHLY
    secret: STRIPE_PRICE_ID_PROFESSIONAL_MONTHLY
    availability:
      - RUNTIME

  # ==========================================
  # Gemini API Configuration
  # ==========================================
  - variable: GEMINI_API_KEY
    secret: GEMINI_API_KEY
    availability:
      - RUNTIME

  # ==========================================
  # Environment Flag
  # ==========================================
  - variable: NEXT_PUBLIC_USE_FIREBASE_EMULATOR
    value: "false"
    availability:
      - BUILD
      - RUNTIME
